<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="author" content="Hamid Ebadi" /><link rel="canonical" href="https://infotiv-research.github.io/SIMLAN/integration_tests/" />
      <link rel="shortcut icon" href="../img/favicon.ico" />
    <title>Index - SIMLAN, Simulation for Multi-Camera Robotics</title>
    <link rel="stylesheet" href="../css/theme.css" />
    <link rel="stylesheet" href="../css/theme_extra.css" />
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/styles/github.min.css" />
    
      <script>
        // Current page data
        var mkdocs_page_name = "Index";
        var mkdocs_page_input_path = "integration_tests/README.md";
        var mkdocs_page_url = "/SIMLAN/integration_tests/";
      </script>
    
    <!--[if lt IE 9]>
      <script src="../js/html5shiv.min.js"></script>
    <![endif]-->
      <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/highlight.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/languages/bash.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/languages/python.min.js"></script>
      <script>hljs.highlightAll();</script> 
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
    <div class="wy-side-scroll">
      <div class="wy-side-nav-search">
          <a href=".." class="icon icon-home"> SIMLAN, Simulation for Multi-Camera Robotics
        </a><div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../search.html" method="get">
      <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" title="Type search term here" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="..">SIMLAN, Vision-Based Multi-Camera Robotics Simulation</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../dependencies/">Dependencies</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../contributing/">Contributing</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../config_generation/">Config Generation</a>
                </li>
              </ul>
              <p class="caption"><span class="caption-text">Simulation</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../simulation/">Simulation</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../simulation/simlan_gazebo_environment/worlds/">Gazebo Worlds</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../simulation/raw_models/">Models</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../simulation/raw_models/objects/">Object Modeling</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../simulation/raw_models/warehouse/">Warehouse Specification</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../simulation/simlan_bringup/">SIMLAN Bringup</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../simulation/static_agent_launcher/">GPSS cameras</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../simulation/camera_bird_eye_view/">Camera Bird Eye View</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../simulation/aruco_localization/">Aruco Localization</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../simulation/pallet_truck/pallet_truck_bringup/">Bringup</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../simulation/pallet_truck/">Pallet Truck</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../simulation/pallet_truck/pallet_truck_control/">Control</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../simulation/pallet_truck/pallet_truck_navigation/">Navigation</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../simulation/bt_failsafe/">Failsafe</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../simulation/humanoid_robot/">Humanoid Robot</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../simulation/humanoid_support_moveit_config/">Humanoid Moveit</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../humanoid_utility/">Humanoid Motion Capture</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../humanoid_utility/pre_processing/">Humanoid Preprocessing</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../humanoid_utility/DEBUG/">Humanoid internal</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../simulation/humanoid_motion_planner/">Humanoid motion planner</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../humanoid_utility/pose_to_motion/autogluon/">Pose to Motion AutoGluon model</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../simulation/robot_arm_moveit2/">Panda MoveIt2</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../simulation/object_mover/">Object Mover</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../simulation/scenario_manager/">Scenario Manager</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../simulation/visualize_real_data/">Visualize Real Data Package</a>
                  </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../credits/">Credits</a>
                </li>
              </ul>
              <p class="caption"><span class="caption-text">Appendix</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../ISSUES/">Issues</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../CHANGELOG/">Changelog</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../resources/diagrams/">Diagrams</a>
                  </li>
              </ul>
      </div>
    </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">
      <nav class="wy-nav-top" role="navigation" aria-label="Mobile navigation menu">
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="..">SIMLAN, Simulation for Multi-Camera Robotics</a>
        
      </nav>
      <div class="wy-nav-content">
        <div class="rst-content"><div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href=".." class="icon icon-home" aria-label="Docs"></a></li>
      <li class="breadcrumb-item active">Index</li>
    <li class="wy-breadcrumbs-aside">
          <a href="https://github.com/infotiv-research/SIMLAN/edit/master/docs/integration_tests/README.md">Edit on infotiv-research/SIMLAN</a>
    </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
            <div class="section" itemprop="articleBody">
              
                <h3 id="integration-tests">Integration tests</h3>
<p>To run the tests in any package you need to run: <code>colcon test</code> or for specific packages: <code>colcon test --packages-select integration_tests</code></p>
<p>Here is an example of a more complex command you can run: <code>colcon test --packages-select integration_tests --event-handlers console_direct+ --merge-install --pytest-args "-s"</code>.</p>
<ul>
<li><code>--event-handlers console_direct+</code>: prints output to console</li>
<li><code>--merge-install</code>: Use a merged install space instead of one per package.</li>
<li><code>--pytest-args "-s"</code>: Pass -s to pytest and do not capture stdout/stderr, so print() shows up.</li>
</ul>
<h4 id="adding-tests">Adding tests.</h4>
<p>If you want to add your own tests, the most important part is to prefix the filename with "test_" in order for colcon to find it.</p>
<p>A template for a test file can look like this below containing a fixture/launch_description and a test case:</p>
<pre><code class="language-bash">
### Fixture
@launch_pytest.fixture(autouse=True)
def launch_description():

    ######## Arguments ########
    world_setup = &quot;default&quot;
    log_level = &quot;error&quot;
    humanoid_str = '[{&quot;namespace&quot;: &quot;humanoid_1&quot;,&quot;initial_pose_x&quot;:10,&quot;initial_pose_y&quot;:0.0}]'

    ######## Launch-files / Processes  ########
    os.environ[&quot;ROS_DOMAIN_ID&quot;] = str(os.getpid() % 232)  #

    sim_proc = ExecuteProcess(
        cmd=[
            &quot;ros2&quot;,
            &quot;launch&quot;,
            &quot;simlan_bringup&quot;,
            &quot;sim.launch.py&quot;,
            f&quot;log_level:={log_level}&quot;,
            f&quot;world_setup:={world_setup}&quot;,
            f&quot;headless_gazebo:=true&quot;,
        ],
        output=&quot;screen&quot;,
    )
    humanoid_proc = ExecuteProcess(
        cmd=[
            &quot;ros2&quot;,
            &quot;launch&quot;,
            &quot;humanoid_robot&quot;,
            &quot;multiple_humanoid_spawn.launch.py&quot;,
            f&quot;log_level:={log_level}&quot;,
            f&quot;humanoids:={humanoid_str}&quot;,
        ],
        output=&quot;screen&quot;,
    )

    ######## Test execution ########
    yield launch.LaunchDescription(
        [
            sim_proc,
            humanoid_proc,
            launch_pytest.actions.ReadyToTest(),
        ]
    )

### TEST
@pytest.mark.launch(fixture=launch_description)
async def test_sim_and_multiple_robots_bringup_Startup_Nodes_and_topics_should_be_visible():
    print(
        &quot;STARTING TEST: sim_and_multiple_robots_bringup_Startup_Nodes_and_topics_should_be_visible &quot;
    )
</code></pre>
<h4 id="information">Information</h4>
<p>This package aims to test all the features in the project with the use of <code>Launch_pytest</code> as the testing framework.</p>
<p>To view the implemented tests, go to the <code>test/</code> directory. All tests need to be named with the prefix test_ for colcon to run them. Each test file should only cover one area and also, each test should only cover one feature within the test. Meaning a test file might cover humanoid, and one of the tests, checks if it can start normally.</p>
<p>A helper node is used that acts as the communicator to the ros2 interface. Its primarily used to fetch the topics and nodes that exist. This helper node is placed <a href="test/test_node.py">here</a>.</p>
<p>The structure within each file is the following:</p>
<h4 id="fixture">Fixture</h4>
<p>The test fixture acts as the setup for each test, where repeated logic exists. Before every test is ran, the fixture runs, and when the test is finished, the fixture shuts down.</p>
<h4 id="test-method">Test method</h4>
<p>The tests have been written to follow the guideline from <a href="https://osherove.com/blog/2005/4/3/naming-standards-for-unit-tests.html">osherove.com</a> where each test covers one thing only and its naming convention is "UnitOfWork_StateUnderTest_ExpectedBehavior".</p>
              
            </div>
          </div><footer>

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
  </div>

  Built with <a href="https://www.mkdocs.org/">MkDocs</a> using a <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
          
        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" aria-label="Versions">
  <span class="rst-current-version" data-toggle="rst-current-version">
    
    
    
  </span>
</div>
    <script src="../js/jquery-3.6.0.min.js"></script>
    <script>var base_url = "..";</script>
    <script src="../js/theme_extra.js"></script>
    <script src="../js/theme.js"></script>
      <script src="../search/main.js"></script>
    <script>
        jQuery(function () {
            SphinxRtdTheme.Navigation.enable(true);
        });
    </script>

</body>
</html>
