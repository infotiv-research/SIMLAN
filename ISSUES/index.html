<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="author" content="Hamid Ebadi" /><link rel="canonical" href="https://infotiv-research.github.io/SIMLAN/ISSUES/" />
      <link rel="shortcut icon" href="../img/favicon.ico" />
    <title>Issues - SIMLAN, Simulation for Multi-Camera Robotics</title>
    <link rel="stylesheet" href="../css/theme.css" />
    <link rel="stylesheet" href="../css/theme_extra.css" />
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/styles/github.min.css" />
    
      <script>
        // Current page data
        var mkdocs_page_name = "Issues";
        var mkdocs_page_input_path = "ISSUES.md";
        var mkdocs_page_url = "/SIMLAN/ISSUES/";
      </script>
    
    <!--[if lt IE 9]>
      <script src="../js/html5shiv.min.js"></script>
    <![endif]-->
      <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/highlight.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/languages/bash.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/languages/python.min.js"></script>
      <script>hljs.highlightAll();</script> 
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
    <div class="wy-side-scroll">
      <div class="wy-side-nav-search">
          <a href=".." class="icon icon-home"> SIMLAN, Simulation for Multi-Camera Robotics
        </a><div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../search.html" method="get">
      <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" title="Type search term here" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="..">SIMLAN, Vision-Based Multi-Camera Robotics Simulation</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../dependencies/">Dependencies</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../contributing/">Contributing</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../config_generation/">Config Generation</a>
                </li>
              </ul>
              <p class="caption"><span class="caption-text">Simulation</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../simulation/">Simulation</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../simulation/simlan_gazebo_environment/worlds/">Gazebo Worlds</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../simulation/raw_models/">Models</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../simulation/raw_models/objects/">Object Modeling</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../simulation/raw_models/warehouse/">Warehouse Specification</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../simulation/simlan_bringup/">SIMLAN Bringup</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../simulation/static_agent_launcher/">GPSS cameras</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../simulation/camera_bird_eye_view/">Camera Bird Eye View</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../simulation/aruco_localization/">Aruco Localization</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../simulation/pallet_truck/pallet_truck_bringup/">Bringup</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../simulation/pallet_truck/">Pallet Truck</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../simulation/pallet_truck/pallet_truck_control/">Control</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../simulation/pallet_truck/pallet_truck_navigation/">Navigation</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../simulation/bt_failsafe/">Failsafe</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../simulation/humanoid_robot/">Humanoid Robot</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../simulation/humanoid_support_moveit_config/">Humanoid Moveit</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../humanoid_utility/">Humanoid Motion Capture</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../humanoid_utility/pre_processing/">Humanoid Preprocessing</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../humanoid_utility/DEBUG/">Humanoid internal</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../simulation/humanoid_motion_planner/">Humanoid motion planner</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../humanoid_utility/pose_to_motion/autogluon/">Pose to Motion AutoGluon model</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../simulation/robot_arm_moveit2/">Panda MoveIt2</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../simulation/object_mover/">Object Mover</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../simulation/scenario_manager/">Scenario Manager</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../simulation/visualize_real_data/">Visualize Real Data Package</a>
                  </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../credits/">Credits</a>
                </li>
              </ul>
              <p class="caption"><span class="caption-text">Appendix</span></p>
              <ul class="current">
                  <li class="toctree-l1 current"><a class="reference internal current" href="./">Issues</a>
    <ul class="current">
    <li class="toctree-l2"><a class="reference internal" href="#filtering-log-output">Filtering log output</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#aruco-detection">Aruco detection</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#running-ros2-commands">Running ROS2 commands:</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#teleop">Teleop</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#scenarios">Scenarios</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#jackal">Jackal</a>
    </li>
    </ul>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../CHANGELOG/">Changelog</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../resources/diagrams/">Diagrams</a>
                  </li>
              </ul>
      </div>
    </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">
      <nav class="wy-nav-top" role="navigation" aria-label="Mobile navigation menu">
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="..">SIMLAN, Simulation for Multi-Camera Robotics</a>
        
      </nav>
      <div class="wy-nav-content">
        <div class="rst-content"><div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href=".." class="icon icon-home" aria-label="Docs"></a></li>
          <li class="breadcrumb-item">Appendix</li>
      <li class="breadcrumb-item active">Issues</li>
    <li class="wy-breadcrumbs-aside">
          <a href="https://github.com/infotiv-research/SIMLAN/edit/master/docs/ISSUES.md">Edit on infotiv-research/SIMLAN</a>
    </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
            <div class="section" itemprop="articleBody">
              
                <h2 id="advanced-features">Advanced Features</h2>
<h3 id="filtering-log-output">Filtering log output</h3>
<p>In <code>config.sh</code> you can set the level of logs you want outputted into the terminal. By default it is set to "info" to allow all logs. Possible values are: "debug", "info", "warn", and "error". Setting it to "warn" filters out all debug and info messages. Additionally, to filter out specific lines you can add the phrase you want filtered inside <code>log_blacklist.txt</code> and setting the <code>log_level</code> flag to "warn" or "error" will start filtering out all phrases found in the blacklist.</p>
<h3 id="aruco-detection">Aruco detection</h3>
<p>If you want to add the TF links between the cameras and the ArUco markers without running the <code>gpss</code> command, you can run the following command. This is primarily useful for debugging, as <code>gpss</code> runs this as well.</p>
<pre><code class="language-bash">./control.sh aruco_detection
</code></pre>
<p>Finally, to view the bird's-eye perspective from each camera, run the following command and open <code>rviz</code>. Then, navigate to the left panel and under "Camera" change the Topic <code>/static_agents/camera_XXX/image_projected</code> to visualize the corresponding camera feed:</p>
<h3 id="running-ros2-commands">Running ROS2 commands:</h3>
<p>To avoid conflict between ros nodes in the same network, after each build a new random ROS2 domain is created. This means that you need to adjust this random domain before running any ros2 commands. For convenience you can use</p>
<pre><code class="language-bash">./control.sh cmd YOUR_ROS2_COMMANDS
</code></pre>
<p>Here is an example of extracting tf2 hierarchy</p>
<pre><code>./control.sh cmd ros2 run tf2_tools view_frames
</code></pre>
<p>These features and commands are under development and not fully supported yet and therefore are subject to change.</p>
<p><strong>Cartographer</strong>: With both Gazebo and rviz running you can start creating a map of a robot's surroundings.</p>
<p>To start: <code>./control.sh cartographer</code></p>
<h3 id="teleop">Teleop</h3>
<p>If you want to control any robot (pallet truck, humanoid, etc.) manually you can run the following command. Remember to specify what robot you want to control by adding its namespace as argument, i.e. <code>./control.sh teleop pallet_truck_1</code></p>
<pre><code class="language-bash">./control.sh teleop ${YOUR_ROBOT_NAMESPACE}
</code></pre>
<p>To move the humanoid around in the simulator</p>
<pre><code class="language-bash">./control.sh teleop ${YOUR_HUMANOID_NAMESPACE}
</code></pre>
<h3 id="scenarios">Scenarios</h3>
<p>In <a href="../scenarios.sh">scenarios.sh</a> you can run predefined scenarios of the project. At the bottom of the file, commands are shown how to run it; otherwise each scenario is referenced by a number.
Currently there are 3 scenarios and to run them, run this command in the shell</p>
<p>Before running scenario 1 that uses GPSS cameras, make sure that <code>CAMERA_ENABLED_IDS</code> in <code>config.sh</code> has the list of GPSS cameras.</p>
<blockquote>
<p>Note: A previous successful setup where all scenarios worked used these cameras: '160 161 162 163 164 165 166 167 168 169 170'. If robots are not moving in your simulation, it might be that there is no camera looking at the robot.</p>
</blockquote>
<pre><code>./control.sh build
./scenarios.sh 1 # navigation using GPSS cameras (real time factor need to be updated)
./scenarios.sh 2 # Humanoid and robotic arm
./scenarios.sh 3 # Humanoid navigation without GPSS cameras (navigate_w_replanning_and_recovery_robot_agent_X.xml need to be updated )
./scenarios.sh 4 # Record the video demo
</code></pre>
<p>If you want to see the planning route for all agents, load <code>scenario_3_planning.rviz</code> in Rviz.</p>
<p>Keep in mind to change <code>real_time_factor</code> in <a href="/simulation/simlan_gazebo_environment/worlds/ign_simlan_factory.world.xacro"><code>simulation/simlan_gazebo_environment/worlds/ign_simlan_factory.world.xacro</code></a> to small values to slow down the simulator (e.g. 0.05-0.1) before building the project. <code>./control.sh build</code></p>
<h3 id="jackal">Jackal</h3>
<p>If you want to control the Jackal, you add the following lines into the control.sh:</p>
<pre><code class="language-bash">elif [[ &quot;$*&quot; == *&quot;jackal_teleop&quot;* ]]
then
    ros2 launch dyno_jackal_bringup keyboard_steering.launch.py
</code></pre>
<p>And then run:</p>
<pre><code class="language-bash">./control.sh jackal_teleop
</code></pre>
<p>These ones did not work, so we put them here in issues</p>
<pre><code class="language-bash">elif [[ &quot;$*&quot; == *&quot;move_object&quot;* ]]
then
    ros2 run object_mover move_object
</code></pre>
<pre><code class="language-bash">elif [[ &quot;$*&quot; == *&quot;scenario&quot;* ]]
then
    ros2 launch scenario_execution_ros scenario_launch.py scenario:=simulation/scenario_manager/scenarios/test.osc
</code></pre>
<h2 id="issues">ISSUES</h2>
<h3 id="gazebo_ros2_control">gazebo_ros2_control</h3>
<pre><code>[gzserver-1] [ERROR] [1727951819.671190014] [jackal.gazebo_ros2_control]: controller manager doesn't have an update_rate parameter
</code></pre>
<p>No solution.</p>
<h3 id="openal">OpenAL</h3>
<pre><code>[gzserver-1] [Err] [OpenAL.cc:84] Unable to open audio device[default]
</code></pre>
<p>Related to support for audio inside a Docker container. It will not be resolved.</p>
<h3 id="command-failed-docker-compose">Command failed: docker compose</h3>
<p>If you have any issue with docker incompatibility (e.g. <code>Error: Command failed: docker compose ...</code>), make sure that <code>docker compose</code> or <code>docker-compose</code> is set correctly in the settings.</p>
<p><img alt="dev container in vscode" src="../resources/dev-container-config.png" /></p>
<p>In <code>docker-compose.yaml</code>, uncomment the <code>factory_simulation_nvidia</code> section:</p>
<pre><code>  factory_simulation_nvidia:
    &lt;&lt;: *research-base
    container_name: factory_simulation_nvidia
    runtime: nvidia
    deploy:
      resources:
        reservations:
          devices:
            - driver: nvidia
              count: &quot;all&quot;
              capabilities: [compute,utility,graphics,display]
</code></pre>
<p>and update <code>.devcontainer/devcontainer.json</code>:</p>
<pre><code>{
    &quot;name&quot;: &quot;ROS2 RESEARCH CONTAINER&quot;,
    &quot;dockerComposeFile&quot;: &quot;../docker-compose.yaml&quot;,
    &quot;service&quot;: &quot;factory_simulation_nvidia
...
</code></pre>
<h3 id="missing-nvidia-docker-runtime">Missing nvidia docker runtime</h3>
<p>Solution: https://stackoverflow.com/questions/59008295/add-nvidia-runtime-to-docker-runtimes</p>
<h3 id="docker-nvidia-container-cli-requirement-error">Docker nvidia-container-cli: requirement error</h3>
<p>If you get this error when building the docker container:</p>
<pre><code>nvidia-container-cli: requirement error: unsatisfied condition: cuda&gt;=12.6, please update your driver to a newer version, or use an earlier cuda container: unknown
</code></pre>
<p>A solution to try is first: re-install nvidia-container-toolkit. Or, if that does not work, update your nvidia-drivers.</p>
<h3 id="glibc_2-issue">GLIBC_2 issue</h3>
<p>Sometimes the wrong <code>nvidia-container-toolkit</code> results in this issue below:</p>
<pre><code>$/usr/lib/x86_64-linux-gnu/libc.so.6: version `GLIBC_2.38' not found (required by /usr/lib/x86_64-linux-gnu/libGLdispatch.so.0)
$/usr/lib/x86_64-linux-gnu/libc.so.6: version `GLIBC_2.38' not found (required by /usr/lib/x86_64-linux-gnu/libGLX.so.0)
</code></pre>
<p>If so, try downgrading <code>nvidia-container- toolkit</code>. You can use these commands:</p>
<pre><code>$sudo apt-get remove --purge nvidia-container-toolkit nvidia-container-toolkit-base libnvidia-container*
$sudo apt-get update
$sudo apt-get install nvidia-container-toolkit=1.17.4-1 nvidia-container-toolkit-base=1.17.4-1 libnvidia-container1=1.17.4-1 libnvidia-container-tools=1.17.4-1
</code></pre>
<h3 id="docker-issues">docker issues</h3>
<p>Make sure docker is installed correctly by following these two instructions:</p>
<ul>
<li><a href="https://docs.docker.com/engine/install/ubuntu/#install-using-the-convenience-script">Install docker using the convenience script</a></li>
<li><a href="https://docs.docker.com/engine/install/linux-postinstall/">Linux post-installation steps for Docker Engine</a></li>
</ul>
              
            </div>
          </div><footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="Footer Navigation">
        <a href="../credits/" class="btn btn-neutral float-left" title="Credits"><span class="icon icon-circle-arrow-left"></span> Previous</a>
        <a href="../CHANGELOG/" class="btn btn-neutral float-right" title="Changelog">Next <span class="icon icon-circle-arrow-right"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
  </div>

  Built with <a href="https://www.mkdocs.org/">MkDocs</a> using a <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
          
        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" aria-label="Versions">
  <span class="rst-current-version" data-toggle="rst-current-version">
    
    
      <span><a href="../credits/" style="color: #fcfcfc">&laquo; Previous</a></span>
    
    
      <span><a href="../CHANGELOG/" style="color: #fcfcfc">Next &raquo;</a></span>
    
  </span>
</div>
    <script src="../js/jquery-3.6.0.min.js"></script>
    <script>var base_url = "..";</script>
    <script src="../js/theme_extra.js"></script>
    <script src="../js/theme.js"></script>
      <script src="../search/main.js"></script>
    <script>
        jQuery(function () {
            SphinxRtdTheme.Navigation.enable(true);
        });
    </script>

</body>
</html>
